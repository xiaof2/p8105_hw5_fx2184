p8105_hw5_fx2184
================
Fei
2022-11-15

# problem 2

``` r
# read the data from the web 
url = "https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv"

homicides_raw = read_csv(url)
```

    ## Rows: 52179 Columns: 12
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (9): uid, victim_last, victim_first, victim_race, victim_age, victim_sex...
    ## dbl (3): reported_date, lat, lon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

-   The raw dataset include 52179observations of homicides reported
    criminal homicides over the past decade in 50 of the largest
    American cities, and 12 key variables, they are uid, reported_date,
    victim_last, victim_first, victim_race, victim_age, victim_sex,
    city, state, lat, lon, disposition.
-   some reported `unknown` under variable victim age, sex and race.
-   the `lat` contains 60 missing value, and `lon` contains 60 missing
    value,
-   the raw data contains 3 numeric variables: reported data. longitude
    and latitude, rest of the variables are designed as character
    variables.
-   The data contains only one observation from `Tulsa` with state `OK`,
    which does not make sense. So I assume it’s a typo, I will delete
    this row in the further cleaning step.

``` r
#clean the raw data and create city_state and resolved
homicides = homicides_raw %>% 
  janitor::clean_names() %>% 
  mutate(city_state = str_c(city, state,sep = ", "),
         resolved = case_when(
           disposition == "Closed by arrest" ~ "solved",
           disposition ==  "Open/No arrest" ~ "unsolved",
           disposition ==  "Closed without arrest" ~ "unsolved"
         )) %>% 
  filter(city_state != "Tulsa, AL") %>% 
  relocate(uid, city_state)
```

``` r
#summarize within cities to obtain the total number of homicides and the number of unsolved homicides
total_homicides = homicides %>% 
  group_by(city_state) %>% 
  summarize(total_homicide = n(), unsolved = sum(resolved == "unsolved")) 

total_homicides %>% knitr::kable(align='c',col.names = c("City/State","Total Number of Homicids","Number of Unsolved "))
```

|     City/State     | Total Number of Homicids | Number of Unsolved |
|:------------------:|:------------------------:|:------------------:|
|  Albuquerque, NM   |           378            |        146         |
|    Atlanta, GA     |           973            |        373         |
|   Baltimore, MD    |           2827           |        1825        |
|  Baton Rouge, LA   |           424            |        196         |
|   Birmingham, AL   |           800            |        347         |
|     Boston, MA     |           614            |        310         |
|    Buffalo, NY     |           521            |        319         |
|   Charlotte, NC    |           687            |        206         |
|    Chicago, IL     |           5535           |        4073        |
|   Cincinnati, OH   |           694            |        309         |
|    Columbus, OH    |           1084           |        575         |
|     Dallas, TX     |           1567           |        754         |
|     Denver, CO     |           312            |        169         |
|    Detroit, MI     |           2519           |        1482        |
|     Durham, NC     |           276            |        101         |
|   Fort Worth, TX   |           549            |        255         |
|     Fresno, CA     |           487            |        169         |
|    Houston, TX     |           2942           |        1493        |
|  Indianapolis, IN  |           1322           |        594         |
|  Jacksonville, FL  |           1168           |        597         |
|  Kansas City, MO   |           1190           |        486         |
|   Las Vegas, NV    |           1381           |        572         |
|   Long Beach, CA   |           378            |        156         |
|  Los Angeles, CA   |           2257           |        1106        |
|   Louisville, KY   |           576            |        261         |
|    Memphis, TN     |           1514           |        483         |
|     Miami, FL      |           744            |        450         |
|   Milwaukee, wI    |           1115           |        403         |
|  Minneapolis, MN   |           366            |        187         |
|   Nashville, TN    |           767            |        278         |
|  New Orleans, LA   |           1434           |        930         |
|    New York, NY    |           627            |        243         |
|    Oakland, CA     |           947            |        508         |
| Oklahoma City, OK  |           672            |        326         |
|     Omaha, NE      |           409            |        169         |
|  Philadelphia, PA  |           3037           |        1360        |
|    Phoenix, AZ     |           914            |        504         |
|   Pittsburgh, PA   |           631            |        337         |
|    Richmond, VA    |           429            |        113         |
|   Sacramento, CA   |           376            |        139         |
|  San Antonio, TX   |           833            |        357         |
| San Bernardino, CA |           275            |        170         |
|   San Diego, CA    |           461            |        175         |
| San Francisco, CA  |           663            |        336         |
|    Savannah, GA    |           246            |        115         |
|   St. Louis, MO    |           1677           |        905         |
|    Stockton, CA    |           444            |        266         |
|     Tampa, FL      |           208            |         95         |
|     Tulsa, OK      |           583            |        193         |
|   Washington, DC   |           1345           |        589         |

``` r
# For the city of Baltimore, MD,estimate the proportion of homicides that are unsolved
prop_baltimore =  prop.test(total_homicides %>% filter(city_state == "Baltimore, MD") %>% pull(unsolved),
                            total_homicides %>% filter(city_state == "Baltimore, MD") %>% pull(total_homicide))
broom::tidy(prop_baltimore)
```

    ## # A tibble: 1 × 8
    ##   estimate statistic  p.value parameter conf.low conf.high method    alternative
    ##      <dbl>     <dbl>    <dbl>     <int>    <dbl>     <dbl> <chr>     <chr>      
    ## 1    0.646      239. 6.46e-54         1    0.628     0.663 1-sample… two.sided
